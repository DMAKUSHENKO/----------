## Бот-конвертер «кружков» (Telegram video note)

Бот принимает от пользователя видео (обычное), видео-заметки и документы с видео, конвертирует их с помощью FFmpeg в квадратный формат 640x640 и отправляет обратно как `video_note` (кружок).

### Требования
- Python 3.10+
- FFmpeg (установить отдельно)

Установка FFmpeg на macOS:
```bash
brew install ffmpeg
```

### Установка и запуск
1. Создайте и активируйте виртуальное окружение:
```bash
python3 -m venv venv
source venv/bin/activate
```
2. Установите зависимости:
```bash
pip install -r requirements.txt
```
3. Создайте файл `.env` в корне проекта и добавьте токен бота:
```bash
echo "BOT_TOKEN=ваш_токен" > .env
```
4. Запустите бот:
```bash
python -m app.main
```

### Как это работает
- Бот принимает видео/видео-заметки/видео-документы
- Скачивает файл через Telegram API
- Конвертирует через FFmpeg в квадрат 640x640 (H.264 + AAC), добавляет `faststart` для быстрой отправки
- Отправляет как `video_note`

### Улучшение качества/скорости
- Качество: уменьшайте CRF (например, 22 → 20) в `ffmpeg_utils.py`
- Скорость: увеличивайте `-preset` (например, `veryfast` → `faster`/`ultrafast`) — качество немного снизится
- Аппаратное ускорение (macOS): можно переключиться на `h264_videotoolbox` (см. комментарии в `ffmpeg_utils.py`)


